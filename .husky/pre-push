#!/bin/zsh

GIT_STATUS=$(git status --porcelain)

echo "π” λ¦°νΈ κ²€μ‚¬λ¥Ό μ‹μ‘ν•©λ‹λ‹¤."

if ! LOG=$(pnpm lint 2>&1) || [ "$GIT_STATUS" != "$(git status --porcelain)" ]; then
  echo "β λ¦°νΈ κ²€μ‚¬μ— μ‹¤ν¨ν–μµλ‹λ‹¤."
  echo "$LOG"
  exit 1
else
  echo "β… λ¦°νΈ κ²€μ‚¬λ¥Ό ν†µκ³Όν–μµλ‹λ‹¤."
fi

echo "π” νƒ€μ… κ²€μ‚¬λ¥Ό μ‹μ‘ν•©λ‹λ‹¤."

if ! LOG=$(pnpm type-check 2>&1); then
  echo "β νƒ€μ… κ²€μ‚¬μ— μ‹¤ν¨ν–μµλ‹λ‹¤."
  echo "$LOG"
  exit 1
else
  echo "β… νƒ€μ… κ²€μ‚¬λ¥Ό ν†µκ³Όν–μµλ‹λ‹¤."
fi

exit 0
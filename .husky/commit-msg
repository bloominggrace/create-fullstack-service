#!/bin/zsh

TITLE=$(echo "$(cat "$1")" | head -n 1)
TITLE_LENGTH=${#TITLE}

if [ -z "$TITLE" ]; then
  echo "π”΄ μ»¤λ°‹ μ λ©μ€ λΉ„μ–΄μμ„ μ μ—†μµλ‹λ‹¤."
  exit 1
fi

if [ $TITLE_LENGTH -gt 50 ] && ! [[ "$TITLE" =~ ^(fixup|squash)! ]]; then
  echo "π”΄ μ»¤λ°‹ μ λ©μ΄ ${TITLE_LENGTH}μλ΅ 50μ μ ν•μ„ μ΄κ³Όν–μµλ‹λ‹¤."
  exit 1
fi

if [[ "$TITLE" == *\. ]]; then
  echo "π”΄ μ»¤λ°‹ μ λ©μ€ λ§μΉ¨ν‘λ΅ λλ‚  μ μ—†μµλ‹λ‹¤."
  exit 1
fi

exit 0
